<div class="animated fadeIn">

    <div class="row">

        <div class="col-auto">
            <div class="card">
                <div class="card-header">Item Selection</div>
                <div class="card-body p-0">
                    <div class="row my-2 mx-3">
                        <div class="nav-item dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                                data-toggle="tooltip" data-placement="bottom" title="Set of products"
                                data-toggle="dropdown">
                                {{ itemSelected }}
                            </button>
                            <ul class="dropdown-menu scrollable-menu" aria-labelledby="dropdownMenu">
                                <li *ngFor="let p of itemList; let i = index" (click)="onItemSelect(i);">
                                    <a class="dropdown-item btn-sm" role="button">{{ p.product_merged_name }}
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                </div>
            </div>
        </div>



        <div class="col-auto">
            <div class="card">
                <div class="card-header">Command</div>
                <div class="card-body p-0">

                    <div class="row my-2 mx-3">
                        <div style="text-align: center; vertical-align: middle;">
                            <button class="btn btn-success" (click)="view()" [disabled]="loading"
                                [disabled]="viewDisabled" data-toggle="tooltip" data-placement="bottom"
                                title="Load remote data">View
                                <i class="fa fa-spinner fa-spin" *ngIf="loading"></i>
                            </button>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>
</div>

<div class="card" style="width: 100%;" id="pdfImg">
    <div class="card-header">

        <i *ngIf="loading" class="fa fa-spinner fa-spin fa-fw"></i>
        <i *ngIf="!loading" class="fa fa-shopping-basket" aria-hidden="true"></i> {{title}}
        <app-button [btnPrint]="btnPrint" [print]="print">
        </app-button>
    </div>


    <div class="row" *ngFor="let p of periods; index as i;">
        <div class="col-auto">
            <app-feature_selection #feature_sel></app-feature_selection>
        </div>
        <div class="col-auto">
            <div class="card">
                <div class="card-body text-center">
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" (click)="onNewPeriod()">
                        <i class="icon-plus icons font-3xl d-block float-center"></i>New Period
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="row m-3" *ngIf="stat.length">
        <table>
            <th>{{ itemSelected }}</th>
            <th *ngFor="let h of headers">{{h}}</th>
            <tr>
                <td>Price</td>
                <td *ngFor="let s of stat">{{currencyFormatter(s.Price)}}</td>
            </tr>
            <tr>
                <td>Food Cost</td>
                <td *ngFor="let s of stat">{{ currencyFormatter(s.Food_Cost)}}</td>
            </tr>
            <tr>
                <td>Daily Average Qty Sold</td>
                <td *ngFor="let s of stat">{{numberFormatter(s.Daily_Average_QT_Sold)}}</td>
            </tr>
            <tr>
                <td>Daily Average Contribution</td>
                <td *ngFor="let s of stat">{{currencyFormatter(s.Daily_Average_Contribution)}}</td>
            </tr>
        </table>
    </div>

    <div class="row m-3" *ngIf="stat.length">
        <div class="chart-wrapper" style="display: flex; width: 100%; height: 300px;">
            <canvas baseChart #lineChart [datasets]="lineChartData" [labels]="lineChartLabels"
                [options]="lineChartOptions" [legend]="lineChartLegend" [chartType]="lineChartType">
            </canvas>
        </div>
    </div>
</div>